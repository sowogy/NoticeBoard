<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>경성 게시판</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --focus-color: #38a3ff;
            --box-border: #d9e0e6;
            --label-color: #8c98a4;
            --green: #14ae5c;
            --green-hover: #0f9b50;
            --field-bg: #fff;
        }
        body { background: #f5f7fa; }
        .login-wrap { max-width: 420px; margin: 56px auto; }

        .stacked-input {
            position: relative;
            border: 1.5px solid var(--box-border);
            border-radius: 16px;
            background: var(--field-bg);
            overflow: hidden;
        }
        .stacked-input .rowline {
            position: relative;
            padding: 18px 16px 10px 16px; /* 아이콘 제거 버전 */
        }
        .stacked-input .rowline + .rowline {
            border-top: 1px solid #eef2f6;
            padding-top: 20px;
        }
        .floating-label {
            position: absolute;
            left: 16px;
            top: 16px;
            font-size: 12px;
            color: var(--label-color);
            transition: all .15s ease;
            pointer-events: none;
        }
        .stacked-input input.form-control {
            border: none !important;
            background: transparent;
            padding: 2px 0 0 0;
            font-size: 18px;
            line-height: 1.4;
            box-shadow: none !important;
        }
        .stacked-input:has(input:focus) {
            border-color: var(--focus-color);
            box-shadow: 0 0 0 4px rgba(56,163,255,.12);
        }

        /* 로그인 버튼: 입력폼과 동일 폭(420px) */
        .btn-login {
            width: 100%;
            max-width: 420px;
            background: var(--green);
            color: #fff;
            border: none;
            border-radius: 14px;
            font-weight: 800;
            padding: 14px 16px;
            font-size: 18px;
            display: block;
            margin: 0 auto;
        }
        .btn-login:hover { background: var(--green-hover); }

        /* 로그인 아래 구분선 → 더 진하게 */
        .section-divider {
            border: none;
            border-top: 1px solid #666;
            margin: 20px 0;
        }

        /* 하단 텍스트 링크(옅은 회색) */
        .sub-links {
            display: flex;
            justify-content: center;
            gap: 10px;
            color: #6c757d;
            font-size: 14px;
            max-width: 420px;
            margin: 0 auto;
        }
        .sub-links a {
            color: #6c757d;
            text-decoration: none;
        }
        .sub-links a:hover { text-decoration: underline; }
        .sub-links .divider { color: #6c757d; }
    </style>
</head>
<body class="min-vh-100 d-flex align-items-center justify-content-center">

<div class="card shadow-sm" style="border-radius: 20px; width: 500px; max-width: 96vw;">
    <ul class="nav nav-tabs nav-fill px-2 pt-2" id="loginTabs" role="tablist" style="border-top-left-radius:20px;border-top-right-radius:20px;">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="email-tab" data-bs-toggle="tab" data-bs-target="#email-pane"
                    type="button" role="tab"><i class="fa-solid fa-at me-1"></i> 이메일 로그인</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="social-tab" data-bs-toggle="tab" data-bs-target="#social-pane"
                    type="button" role="tab"><i class="fa-solid fa-users me-1"></i> 소셜 로그인</button>
        </li>
    </ul>

    <div class="tab-content p-4">
        <!-- 이메일 로그인 탭 -->
        <div class="tab-pane fade show active" id="email-pane" role="tabpanel" aria-labelledby="email-tab">
            <div class="container login-wrap p-0" style="margin:0 auto;">
                <form th:action="@{/login}" method="post" novalidate>
                    <div class="stacked-input mb-3">
                        <div class="rowline">
                            <label class="floating-label" for="username">이메일</label>
                            <input type="text" class="form-control" id="username" name="username" autocomplete="username">
                        </div>
                        <div class="rowline">
                            <label class="floating-label" for="password">비밀번호</label>
                            <input type="password" class="form-control" id="password" name="password" autocomplete="current-password">
                        </div>
                    </div>

                    <!-- 로그인 버튼(입력폼과 동일 폭) -->
                    <button type="submit" class="btn btn-login">로그인</button>

                    <!-- 구분선 -->
                    <hr class="section-divider">

                    <!-- 하단 텍스트 링크 -->
                    <div class="sub-links">
                        <a href="#" th:href="@{/find-id}">아이디 찾기</a>
                        <span class="divider">|</span>
                        <a href="#" th:href="@{/find-password}">비밀번호 찾기</a>
                        <span class="divider">|</span>
                        <a href="#" th:href="@{/signup}">회원가입</a>
                    </div>
                </form>
            </div>
        </div>

        <!-- 소셜 로그인 탭 (UI 예시) -->
        <div class="tab-pane fade" id="social-pane" role="tabpanel" aria-labelledby="social-tab">
            <div class="container p-0" style="max-width:420px;">
                <div class="d-grid gap-2 text-center">
                    <a th:href="@{/login/kakao}">
                        <img th:src="@{/image/image/kakao_login_medium_wide.png}" >
                    </a>
                    <button type="button" class="btn btn-outline-secondary d-flex align-items-center justify-content-center gap-2 py-2" style="border-radius:12px;">
                        <i class="fa-brands fa-github"></i> GitHub로 계속
                    </button>
                    <button type="button" class="btn btn-outline-secondary d-flex align-items-center justify-content-center gap-2 py-2" style="border-radius:12px;">
                        <i class="fa-solid fa-n"></i> Naver로 계속
                    </button>
                </div>
                <p class="text-secondary small mt-3 mb-0 text-center">소셜 로그인은 UI만 제공합니다. 실제 연동은 OAuth 설정 후 진행하세요.</p>
            </div>
        </div>
    </div>
</div>

<!-- ⬇️ 기존 JS 그대로 유지 (현 UI에도 안전하게 동작) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script>
    // 입력 지우기 버튼 (현 버전엔 아이콘 버튼이 없어도 에러 없이 무시됨)
    document.querySelectorAll('[data-clear]').forEach(function(btn){
        btn.addEventListener('click', function(){
            const sel = btn.getAttribute('data-clear');
            const el = document.querySelector(sel);
            if (el) { el.value = ''; el.focus(); }
        });
    });

    // 비밀번호 보이기/가리기 (현 버전엔 아이콘 버튼이 없어도 에러 없이 무시됨)
    document.querySelectorAll('[data-toggle-password]').forEach(function(btn){
        btn.addEventListener('click', function(){
            const sel = btn.getAttribute('data-toggle-password');
            const el = document.querySelector(sel);
            if (!el) return;

            const icon = btn.querySelector("i");
            if (el.type === 'password') {
                el.type = 'text';
                if (icon) icon.className = "fa-solid fa-eye-slash";
                btn.setAttribute('aria-label', '비밀번호 가리기');
            } else {
                el.type = 'password';
                if (icon) icon.className = "fa-solid fa-eye";
                btn.setAttribute('aria-label', '비밀번호 보이기');
            }
            el.focus();
        });
    });

    // 플로팅 라벨 위치 동기화
    function syncFloatingLabel(input) {
        const label = input.closest('.rowline')?.querySelector('.floating-label');
        if (!label) return;
        if (input.value && input.value.trim() !== '') {
            label.style.top = '2px';
            label.style.fontSize = '11px';
            label.style.color = '#8c98a4';
        } else {
            label.style.top = '4px';
            label.style.fontSize = '12px';
            label.style.color = '#8c98a4';
        }
    }
    document.querySelectorAll('.stacked-input input').forEach(function(input){
        ['input','change','blur','keyup'].forEach(evt =>
            input.addEventListener(evt, () => syncFloatingLabel(input))
        );
        // 초기 상태 맞추기
        syncFloatingLabel(input);
    });
</script>
</body>
</html>
